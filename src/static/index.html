<html>
    <body>
        <h1>Messages</h1>
        <output id="output"></output>

        <script>
            const output = document.getElementById('output')

            const socket = new WebSocket('ws://localhost:3000')

            socket.onopen = (event) => {
                console.log('Open', event)
                const id = Math.round(Math.random() * 10000000)
                console.log('Sending', id)
                const data = JSON.stringify({
                    id,
                    name: "Mehriddin"
                })

                socket.send(data)

            }

            socket.onmessage = (message) => {
                console.log('Message', message)
            }

            socket.onclose = (event) => {
                console.log('Close', event)
            }

            socket.onerror = (error) => {
                console.log('Error', error)
            }
        </script>
    </body>
</html>